lane :verify do
  verify_xcode
end

desc "Runs SwiftLint"
lane :lint do

    swiftLint(
        mode: :lint,
        config_file: '.swiftlint.yml'
    )
end


platform :mac do

  desc "Stress Test"
  lane :stress_test do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "Stress Tests",
      configuration: "Release",
      destination: "platform=macOS"
    )

  end

  desc "ProcedureKit"
  lane :test do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKit",
      destination: "platform=macOS"
    )

  end

  desc "ProcedureKitCloud"
  lane :test_cloud do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCloud",
      destination: "platform=macOS"
    )
  end

  desc "ProcedureKitCoreData"
  lane :test_coredata do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCoreData",
      destination: "platform=macOS"
    )
  end

  desc "ProcedureKitLocation"
  lane :test_location do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitLocation",
      destination: "platform=macOS"
    )
  end


  desc "ProcedureKitNetwork"
  lane :test_network do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitNetwork",
      destination: "platform=macOS"
    )
  end

  desc "ProcedureKitMac"
  lane :test_mac do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitMac",
      destination: "platform=macOS"
    )
  end

end


platform :ios do

  desc "ProcedureKit"
  lane :test_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKit",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )
  end

  desc "ProcedureKitCloud"
  lane :test_cloud_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCloud",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )
  end

  desc "ProcedureKitCoreData"
  lane :test_coredata_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCoreData",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )
  end

  desc "ProcedureKitLocation"
  lane :test_location_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitLocation",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )

  end

  desc "ProcedureKitNetwork"
  lane :test_network_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitNetwork",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )
  end

  desc "ProcedureKitMobile"
  lane :test_mobile_ios do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitMobile",
      destination: "platform=iOS Simulator,OS=11.3,name=iPhone 8"
    )
  end


# tvOS


  desc "ProcedureKit"
  lane :test_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKit",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitCloud"
  lane :test_cloud_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCloud",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitCoreData"
  lane :test_coredata_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitCoreData",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitLocation"
  lane :test_location_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitLocation",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitNetwork"
  lane :test_network_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitNetwork",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitMobile"
  lane :test_mobile_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitMobile",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

  desc "ProcedureKitTV"
  lane :test_tv_tvos do

    scan(
      project: "ProcedureKit.xcodeproj",
      scheme: "ProcedureKitTV",
      destination: "platform=tvOS Simulator,OS=11.3,name=Apple TV"
    )
  end

end
